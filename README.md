VoKS-desktop
============

This project constitutes the OSX and Windows desktop application as part of the BComeSafe alarm system. Its purpose is to let users trigger the alarm, stream audio and video to the Shelter, and communicate textually with the shelter.

The application is written in HTML5, which is then wrapped with an interpreter into an executable for each of the target platforms.


## Building the Windows application ##

### BEFORE USE ###

Resource hacker ([http://www.angusj.com/resourcehacker/#download](http://www.angusj.com/resourcehacker/#download)) must be installed and the location specified in the builder.bat:

       SET RH_EXE="C:\Program Files (x86)\Resource Hacker\ResourceHacker.exe"
    
Inno setup ([http://www.jrsoftware.org/isdl.php](http://www.jrsoftware.org/isdl.php)) must be installed and the location specified in the builder.bat:

    SET INNO_EXE="C:\Program Files (x86)\Inno Setup 5\ISCC.exe"
    
Node ([https://nodejs.org/en/download/](https://nodejs.org/en/download/)) must be installed

7Zip ([http://www.7-zip.org/download.html](http://www.7-zip.org/download.html)) must be installed and the location specified in the builder.bat:

	SET ZIP_EXE="C:\Program Files\7-Zip\7z.exe"

Node webkit builder must be installed via command line: 
	
	npm install nw-builder -g

execute via command line to install application dependencies:

	npm install

Change config/config-en.js and config/config-no.js domain value.
   
Generate AppId and change it in scripts/*.iss files (To generate a new GUID, in Inno setup, click Tools | Generate GUID inside the IDE.)

### HOW TO USE ###
1. Run it by clicking the bat file or opening it from the cmd
2. After script finishes executing "output" directory will contain windows installers, and output.zip which will be required to build the osx installers.

## Building the iOs application ##

### BEFORE USE ###

Download and install Package builder on OSX device: 
   [http://s.sudre.free.fr/Software/Packages/about.html](http://s.sudre.free.fr/Software/Packages/about.html)

Download and install node on OSX device: [https://nodejs.org/en/download/](https://nodejs.org/en/download/)
   
You will need Developer ID application and Developer ID installer certificates generated by apple.

"build-sign.sh" script should be modified to have apropriate certificate identity strings, for signing the application and installer (.pkg)

First the windows builder should be executed. Output directory will contain the output.zip that is required in order to build and sign the pkg installers for osx.


### HOW TO USE ###

Move the output.zip to the directory where "build-sign.sh" is present.
Execute build-sign.sh on osx device;
After the script finishes executing the "output" folder will contain signed installers